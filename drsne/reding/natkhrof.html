<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0984e3">
  <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø¨ØªØ¬Ø±Ø¨Ø© Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - 3D</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
    
    :root {
      --primary-color: #0984e3;
      --secondary-color: #00cec9;
      --accent-color: #fdcb6e;
      --error-color: #ff7675;
      --text-color: #2d3436;
      --light-text: #636e72;
      --bg-color: #f5f7fa;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Amiri', serif;
      background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
      margin: 0;
      padding: 0;
      color: var(--text-color);
      min-height: 100vh;
      overflow: hidden;
    }
    
    #game-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }
    
    .ui-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
    }
    
    .ui-overlay > * {
      pointer-events: auto;
    }
    
    .header {
      position: absolute;
      top: 20px;
      right: 20px;
      left: 20px;
      text-align: center;
      z-index: 11;
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      color: white;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
      padding: 10px 20px;
      background: rgba(9, 132, 227, 0.7);
      border-radius: 15px;
      display: inline-block;
      backdrop-filter: blur(5px);
    }
    
    .stars-container {
      display: flex;
      justify-content: center;
      margin: 10px auto;
      flex-wrap: wrap;
      max-width: 800px;
      gap: 5px;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .star {
      font-size: 1.5rem;
      color: #e0e0e0;
      transition: all 0.3s ease;
    }
    
    .star.active {
      color: #ffd700;
      text-shadow: 0 0 10px #ffd700;
      transform: scale(1.2);
    }
    
    .controls {
      position: absolute;
      bottom: 20px;
      left: 20px;
      display: flex;
      gap: 10px;
      z-index: 11;
    }
    
    .control-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.8);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    .control-btn:hover {
      background: white;
      transform: scale(1.1);
    }
    
    .instructions-btn {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.8);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      z-index: 11;
    }
    
    .instructions-btn:hover {
      background: white;
      transform: scale(1.1);
    }
    
    .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.7);
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
      animation: fadeIn 0.3s ease;
    }
    
    .popup-content {
      background: linear-gradient(145deg, #ffffff 0%, #f5f7fa 100%);
      padding: 25px;
      border-radius: 25px;
      text-align: center;
      width: 95%;
      max-width: 500px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
      transform: scale(0.9);
      animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      position: relative;
      overflow: hidden;
    }
    
    @keyframes popIn {
      0% { transform: scale(0.9); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .popup h2 {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
      position: relative;
    }
    
    .letter-display {
      font-size: 4rem;
      margin: 1rem 0;
      color: var(--primary-color);
      text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
    }
    
    .example {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      margin: 1.5rem 0;
      min-height: 200px;
      justify-content: center;
    }
    
    .example-icon {
      font-size: 5rem;
      margin-bottom: 10px;
      display: none;
    }
    
    .example.active .example-icon {
      display: block;
      animation: fadeInImg 0.5s ease;
    }
    
    @keyframes fadeInImg {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .example-name {
      font-size: 1.5rem;
      font-weight: bold;
      display: none;
    }
    
    .example.active .example-name {
      display: block;
    }
    
    .haraka-name {
      font-size: 1.1rem;
      color: var(--light-text);
      margin-top: 5px;
      display: none;
    }
    
    .example.active .haraka-name {
      display: block;
    }
    
    .popup .letter-options {
      margin: 1.5rem 0;
    }
    
    .popup .letter-options button {
      font-size: 1.5rem;
      padding: 10px 15px;
      background: var(--primary-color);
      color: white;
      border-radius: 12px;
      min-width: 50px;
      border: none;
      cursor: pointer;
      margin: 0 5px;
      transition: all 0.3s ease;
    }
    
    .popup .letter-options button:hover {
      background: #0a7bc8;
      transform: translateY(-3px);
    }
    
    .instruction {
      font-size: 1rem;
      color: var(--light-text);
      margin-top: 1rem;
      font-style: italic;
    }
    
    .close-btn {
      margin-top: 1.5rem;
      background: linear-gradient(to right, #ff7675, #d63031);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(214, 48, 49, 0.4);
      transition: all 0.3s ease;
      font-family: 'Amiri', serif;
    }
    
    .close-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(214, 48, 49, 0.6);
    }
    
    .instructions-popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.7);
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
      animation: fadeIn 0.3s ease;
    }
    
    .instructions-content {
      background: linear-gradient(145deg, #ffffff 0%, #f5f7fa 100%);
      padding: 30px;
      border-radius: 25px;
      width: 95%;
      max-width: 600px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
      transform: scale(0.9);
      animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      position: relative;
      overflow: hidden;
    }
    
    .instructions-content h2 {
      text-align: center;
      color: #d9480f;
      margin-bottom: 20px;
      font-size: 1.8rem;
    }
    
    .instructions-content ul {
      list-style-type: "â­ ";
      padding-right: 20px;
      font-size: 1.1rem;
      line-height: 2;
    }
    
    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: rgba(0,0,0,0.7);
      z-index: 2000;
      animation: fadeIn 0.5s ease;
    }
    
    .celebration-content {
      text-align: center;
      animation: bounce 1s ease infinite;
    }
    
    .celebration-emoji {
      font-size: 5rem;
      margin-bottom: 20px;
      text-shadow: 0 0 20px #ffd700;
    }
    
    .celebration-stars {
      position: absolute;
      font-size: 2rem;
      color: #ffd700;
      animation: twinkle 2s ease infinite;
    }
    
    .celebration-message {
      font-size: 1.5rem;
      color: white;
      margin-top: 20px;
      text-shadow: 0 0 10px #000;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(0.8); }
    }
    
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      color: white;
    }
    
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-bottom: 20px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-size: 1.2rem;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      h1 {
        font-size: 1.8rem;
      }
      
      .popup-content {
        width: 90%;
        padding: 20px;
      }
      
      .letter-display {
        font-size: 3rem;
      }
      
      .example-icon {
        font-size: 4rem;
      }
      
      .celebration-emoji {
        font-size: 4rem;
      }
      
      .celebration-message {
        font-size: 1.2rem;
      }
      
      .control-btn, .instructions-btn {
        width: 45px;
        height: 45px;
        font-size: 1.2rem;
      }
    }
    
    @media (max-width: 480px) {
      h1 {
        font-size: 1.5rem;
      }
      
      .popup .letter-options button {
        font-size: 1.2rem;
        padding: 8px 12px;
      }
      
      .star {
        font-size: 1.2rem;
      }
      
      .celebration-emoji {
        font-size: 3rem;
      }
      
      .celebration-message {
        font-size: 1rem;
      }
      
      .control-btn, .instructions-btn {
        width: 40px;
        height: 40px;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div id="game-container"></div>
  
  <div class="ui-overlay">
    <div class="header">
      <h1>Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - 3D</h1>
      <div class="stars-container" id="stars-container"></div>
    </div>
    
    <div class="controls">
      <button class="control-btn" id="zoom-in">+</button>
      <button class="control-btn" id="zoom-out">-</button>
      <button class="control-btn" id="reset-view">â†º</button>
    </div>
    
    <button class="instructions-btn" id="instructions-btn">â“</button>
  </div>
  
  <div id="popup" class="popup">
    <div class="popup-content">
      <h2 id="popup-title">Ø§Ù„Ø­Ø±Ù</h2>
      <div class="letter-display" id="letter-display"></div>
      
      <div class="example" id="example">
        <div class="example-icon" id="example-icon"></div>
        <span id="example-name" class="example-name">Ø§Ø³Ù… Ø§Ù„Ù…Ø«Ø§Ù„</span>
        <span id="haraka-name" class="haraka-name"></span>
      </div>
      
      <div class="letter-options">
        <button onclick="showExample(currentLetter, 'fatha')">Ù <span>ÙØªØ­Ø©</span></button>
        <button onclick="showExample(currentLetter, 'kasra')">Ù <span>ÙƒØ³Ø±Ø©</span></button>
        <button onclick="showExample(currentLetter, 'damma')">Ù <span>Ø¶Ù…Ø©</span></button>
      </div>
      
      <div class="instruction">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±ÙƒØ§Øª Ù„Ø³Ù…Ø§Ø¹ Ù†Ø·Ù‚ Ø§Ù„Ø­Ø±Ù Ù…Ø¹ Ø§Ù„Ø­Ø±ÙƒØ§Øª</div>
      <button class="close-btn" onclick="hidePopup()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>

  <div id="instructions-popup" class="instructions-popup">
    <div class="instructions-content">
      <h2>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨</h2>
      <ul>
        <li>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§ÙˆØ³ Ù„Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø© Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯.</li>
        <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø±Ù Ø¹Ø§Ø¦Ù… Ù„ØªØ¹Ù„Ù…Ù‡.</li>
        <li>Ø§Ø³ØªÙ…Ø¹ Ø¥Ù„Ù‰ Ù†Ø·Ù‚ Ø§Ù„Ø­Ø±Ù Ø§Ù„ØµØ­ÙŠØ­ Ø¨ØµÙˆØª ÙˆØ§Ø¶Ø­ ÙˆÙ…Ù…ØªØ¹.</li>
        <li>ÙƒØ±Ø± Ø§Ù„Ø­Ø±Ù Ø¨ØµÙˆØªÙƒ Ù„ØªØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø·Ù‚.</li>
        <li>Ø´Ø§Ù‡Ø¯ ØµÙˆØ±Ø© ÙˆÙƒÙ„Ù…Ø© ØªØ¨Ø¯Ø£ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø­Ø±Ù Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ‡Ù….</li>
        <li>Ø§Ø³ØªØ®Ø¯Ù… Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„ØªÙ‚Ø±ÙŠØ¨ ÙˆØ§Ù„ØªØµØºÙŠØ± ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¹Ø±Ø¶.</li>
        <li>Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ù„ØªØµØ¨Ø­ Ù†Ø¬Ù… Ø§Ù„Ø­Ø±ÙˆÙ!</li>
      </ul>
      <button class="close-btn" onclick="hideInstructions()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>

  <div class="loading-screen" id="loading-screen">
    <div class="loading-spinner"></div>
    <div class="loading-text">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø© Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯...</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    const letters = [
      {char: 'Ø£', name: 'Ø§Ù„Ø£Ù„Ù', icon: 'ğŸ¦'},
      {char: 'Ø¨', name: 'Ø§Ù„Ø¨Ø§Ø¡', icon: 'ğŸ '},
      {char: 'Øª', name: 'Ø§Ù„ØªØ§Ø¡', icon: 'ğŸ'},
      {char: 'Ø«', name: 'Ø§Ù„Ø«Ø§Ø¡', icon: 'ğŸ‘•'},
      {char: 'Ø¬', name: 'Ø§Ù„Ø¬ÙŠÙ…', icon: 'ğŸª'},
      {char: 'Ø­', name: 'Ø§Ù„Ø­Ø§Ø¡', icon: 'ğŸ§±'},
      {char: 'Ø®', name: 'Ø§Ù„Ø®Ø§Ø¡', icon: 'ğŸ¥¬'},
      {char: 'Ø¯', name: 'Ø§Ù„Ø¯Ø§Ù„', icon: 'ğŸ¡'},
      {char: 'Ø°', name: 'Ø§Ù„Ø°Ø§Ù„', icon: 'ğŸº'},
      {char: 'Ø±', name: 'Ø§Ù„Ø±Ø§Ø¡', icon: 'ğŸ‘¨'},
      {char: 'Ø²', name: 'Ø§Ù„Ø²Ø§ÙŠ', icon: 'ğŸŒº'},
      {char: 'Ø³', name: 'Ø§Ù„Ø³ÙŠÙ†', icon: 'ğŸŸ'},
      {char: 'Ø´', name: 'Ø§Ù„Ø´ÙŠÙ†', icon: 'â˜€ï¸'},
      {char: 'Øµ', name: 'Ø§Ù„ØµØ§Ø¯', icon: 'ğŸ•‹'},
      {char: 'Ø¶', name: 'Ø§Ù„Ø¶Ø§Ø¯', icon: 'ğŸ‘Š'},
      {char: 'Ø·', name: 'Ø§Ù„Ø·Ø§Ø¡', icon: 'ğŸ¦’'},
      {char: 'Ø¸', name: 'Ø§Ù„Ø¸Ø§Ø¡', icon: 'ğŸŒ‘'},
      {char: 'Ø¹', name: 'Ø§Ù„Ø¹ÙŠÙ†', icon: 'ğŸ¯'},
      {char: 'Øº', name: 'Ø§Ù„ØºÙŠÙ†', icon: 'ğŸ˜ '},
      {char: 'Ù', name: 'Ø§Ù„ÙØ§Ø¡', icon: 'ğŸ´'},
      {char: 'Ù‚', name: 'Ø§Ù„Ù‚Ø§Ù', icon: 'âœï¸'},
      {char: 'Ùƒ', name: 'Ø§Ù„ÙƒØ§Ù', icon: 'ğŸ•'},
      {char: 'Ù„', name: 'Ø§Ù„Ù„Ø§Ù…', icon: 'ğŸ‹'},
      {char: 'Ù…', name: 'Ø§Ù„Ù…ÙŠÙ…', icon: 'ğŸ™ï¸'},
      {char: 'Ù†', name: 'Ø§Ù„Ù†ÙˆÙ†', icon: 'ğŸ¯'},
      {char: 'Ù‡Ù€', name: 'Ø§Ù„Ù‡Ø§Ø¡', icon: 'ğŸŒ³'},
      {char: 'Ùˆ', name: 'Ø§Ù„ÙˆØ§Ùˆ', icon: 'ğŸŒ¹'},
      {char: 'ÙŠ', name: 'Ø§Ù„ÙŠØ§Ø¡', icon: 'âœ‹'}
    ];
    
    const colors = ['#ff7675', '#74b9ff', '#55efc4', '#a29bfe', '#ffeaa7', '#fd79a8', '#81ecec', '#fab1a0', '#00b894', '#6c5ce7'];
    
    // Ø£Ù…Ø«Ù„Ø© Ù„ÙƒÙ„ Ø§Ù„Ø­Ø±ÙˆÙ Ù…Ø¹ Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
    const examples = {
      'Ø£': {
        name: 'Ø§Ù„Ø£Ù„Ù',
        fatha: {icon: 'ğŸ¦', word: 'Ø£ÙØ³ÙØ¯', meaning: 'Ø­ÙŠÙˆØ§Ù† Ù…ÙØªØ±Ø³'},
        kasra: {icon: 'ğŸª¡', word: 'Ø¥ÙØ¨Ù’Ø±ÙØ©', meaning: 'Ø£Ø¯Ø§Ø© Ù„Ù„Ø®ÙŠØ§Ø·Ø©'},
        damma: {icon: 'ğŸ§ª', word: 'Ø£ÙÙ†Ø¨ÙˆØ¨', meaning: 'Ø£Ù†Ø¨ÙˆØ¨ ØµØºÙŠØ±'}
      },
      'Ø¨': {
        name: 'Ø§Ù„Ø¨Ø§Ø¡',
        fatha: {icon: 'ğŸ ', word: 'Ø¨ÙÙŠÙ’Øª', meaning: 'Ù…ÙƒØ§Ù† Ø§Ù„Ø³ÙƒÙ†'},
        kasra: {icon: 'ğŸ‘§', word: 'Ø¨ÙÙ†Ù’Øª', meaning: 'Ø·ÙÙ„Ø© Ø£Ù†Ø«Ù‰'},
        damma: {icon: 'ğŸŠ', word: 'Ø¨ÙØ±Ù’ØªÙÙ‚ÙØ§Ù„', meaning: 'ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„'}
      },
      'Øª': {
        name: 'Ø§Ù„ØªØ§Ø¡',
        fatha: {icon: 'ğŸ', word: 'ØªÙÙÙÙ‘Ø§Ø­', meaning: 'ÙØ§ÙƒÙ‡Ø© Ø§Ù„ØªÙØ§Ø­'},
        kasra: {icon: 'ğŸŒ³', word: 'ØªÙÙŠÙ†', meaning: 'ÙØ§ÙƒÙ‡Ø© Ø§Ù„ØªÙŠÙ†'},
        damma: {icon: 'ğŸ', word: 'ØªÙÙÙÙ‘Ø§Ø­', meaning: 'ÙØ§ÙƒÙ‡Ø© Ø§Ù„ØªÙØ§Ø­'}
      },
      'Ø«': {
        name: 'Ø§Ù„Ø«Ø§Ø¡',
        fatha: {icon: 'ğŸ‘•', word: 'Ø«ÙÙˆÙ’Ø¨', meaning: 'Ù„Ø¨Ø§Ø³'},
        kasra: {icon: 'ğŸŒ±', word: 'Ø«ÙÙŠÙ„', meaning: 'Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù†Ø¨Ø§Øª'},
        damma: {icon: 'âœ¨', word: 'Ø«ÙØ±ÙÙŠÙÙ‘Ø§', meaning: 'Ù†Ø¬ÙˆÙ… Ø§Ù„Ø«Ø±ÙŠØ§'}
      },
      'Ø¬': {
        name: 'Ø§Ù„Ø¬ÙŠÙ…',
        fatha: {icon: 'ğŸª', word: 'Ø¬ÙÙ…ÙÙ„', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø¬Ù…Ù„'},
        kasra: {icon: 'ğŸ‘¨â€âš•ï¸', word: 'Ø¬ÙØ±ÙØ§Ø­', meaning: 'Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø¬Ø±Ø§Ø­'},
        damma: {icon: 'ğŸ¦—', word: 'Ø¬ÙÙ†Ù’Ø¯ÙØ¨', meaning: 'Ø­Ø´Ø±Ø© Ø§Ù„Ø¬Ù†Ø¯Ø¨'}
      },
      'Ø­': {
        name: 'Ø§Ù„Ø­Ø§Ø¡',
        fatha: {icon: 'ğŸ§±', word: 'Ø­ÙØ¬ÙØ±', meaning: 'Ù‚Ø·Ø¹Ø© ØµØ®Ø±'},
        kasra: {icon: 'ğŸ´', word: 'Ø­ÙÙ…ÙØ§Ø±', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø­Ù…Ø§Ø±'},
        damma: {icon: 'ğŸ‹', word: 'Ø­ÙÙˆØª', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø­ÙˆØª'}
      },
      'Ø®': {
        name: 'Ø§Ù„Ø®Ø§Ø¡',
        fatha: {icon: 'ğŸ¥¬', word: 'Ø®ÙØ¶Ù’Ø±ÙØ§Ø¡', meaning: 'Ù„ÙˆÙ† Ø£Ø®Ø¶Ø±'},
        kasra: {icon: 'ğŸ·', word: 'Ø®ÙÙ†Ù’Ø²ÙÙŠØ±', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø®Ù†Ø²ÙŠØ±'},
        damma: {icon: 'ğŸ', word: 'Ø®ÙØ¨Ù’Ø²', meaning: 'Ø±ØºÙŠÙ Ø§Ù„Ø®Ø¨Ø²'}
      },
      'Ø¯': {
        name: 'Ø§Ù„Ø¯Ø§Ù„',
        fatha: {icon: 'ğŸ¡', word: 'Ø¯ÙØ§Ø±', meaning: 'Ù…Ù†Ø²Ù„'},
        kasra: {icon: 'ğŸ¸', word: 'Ø¶ÙÙÙ’Ø¯ÙØ¹', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø¶ÙØ¯Ø¹'},
        damma: {icon: 'ğŸ’¨', word: 'Ø¯ÙØ®ÙØ§Ù†', meaning: 'Ø§Ù„Ø¯Ø®Ø§Ù†'}
      },
      'Ø°': {
        name: 'Ø§Ù„Ø°Ø§Ù„',
        fatha: {icon: 'ğŸ’°', word: 'Ø°ÙÙ‡ÙØ¨', meaning: 'Ø§Ù„Ù…Ø¹Ø¯Ù† Ø§Ù„Ù†ÙÙŠØ³'},
        kasra: {icon: 'ğŸº', word: 'Ø°ÙØ¦Ù’Ø¨', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°Ø¦Ø¨'},
        damma: {icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', word: 'Ø°ÙØ±ÙÙ‘ÙŠÙÙ‘Ø©', meaning: 'Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡'}
      },
      'Ø±': {
        name: 'Ø§Ù„Ø±Ø§Ø¡',
        fatha: {icon: 'ğŸ‘¨', word: 'Ø±ÙØ¬ÙÙ„', meaning: 'Ø±Ø¬Ù„'},
        kasra: {icon: 'ğŸ’¨', word: 'Ø±ÙÙŠØ­', meaning: 'Ù‡ÙˆØ§Ø¡'},
        damma: {icon: 'ğŸ', word: 'Ø±ÙÙ…ÙÙ‘Ø§Ù†', meaning: 'ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ø±Ù…Ø§Ù†'}
      },
      'Ø²': {
        name: 'Ø§Ù„Ø²Ø§ÙŠ',
        fatha: {icon: 'ğŸŒº', word: 'Ø²ÙÙ‡Ù’Ø±ÙØ©', meaning: 'Ø²Ù‡Ø±Ø©'},
        kasra: {icon: 'ğŸ¦’', word: 'Ø²ÙØ±ÙØ§ÙÙØ©', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø²Ø±Ø§ÙØ©'},
        damma: {icon: 'ğŸªŸ', word: 'Ø²ÙØ¬ÙØ§Ø¬', meaning: 'Ø§Ù„Ø²Ø¬Ø§Ø¬'}
      },
      'Ø³': {
        name: 'Ø§Ù„Ø³ÙŠÙ†',
        fatha: {icon: 'ğŸŸ', word: 'Ø³ÙÙ…ÙÙƒ', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø³Ù…Ùƒ'},
        kasra: {icon: 'ğŸ‘–', word: 'Ø³ÙØ±Ù’ÙˆÙØ§Ù„', meaning: 'Ù„Ø¨Ø§Ø³ Ø§Ù„Ø³Ø±ÙˆØ§Ù„'},
        damma: {icon: 'ğŸ§µ', word: 'Ø³ÙÙ†Ù’Ø¯ÙØ³', meaning: 'Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø­Ø±ÙŠØ±'}
      },
      'Ø´': {
        name: 'Ø§Ù„Ø´ÙŠÙ†',
        fatha: {icon: 'â˜€ï¸', word: 'Ø´ÙÙ…Ù’Ø³', meaning: 'Ø§Ù„Ø´Ù…Ø³'},
        kasra: {icon: 'ğŸ¥¤', word: 'Ø´ÙØ±Ù’Ø¨', meaning: 'Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡'},
        damma: {icon: 'ğŸ¦¸', word: 'Ø´ÙØ¬ÙØ§Ø¹', meaning: 'Ø´Ø®Øµ Ø´Ø¬Ø§Ø¹'}
      },
      'Øµ': {
        name: 'Ø§Ù„ØµØ§Ø¯',
        fatha: {icon: 'ğŸ•‹', word: 'ØµÙØ¨Ù’Ø±', meaning: 'Ø§Ù„ØµØ¨Ø±'},
        kasra: {icon: 'ğŸ›£ï¸', word: 'ØµÙØ±ÙØ§Ø·', meaning: 'Ø§Ù„Ø·Ø±ÙŠÙ‚'},
        damma: {icon: 'ğŸ“°', word: 'ØµÙØ­ÙÙ', meaning: 'Ø§Ù„ØµØ­Ù'}
      },
      'Ø¶': {
        name: 'Ø§Ù„Ø¶Ø§Ø¯',
        fatha: {icon: 'ğŸ‘Š', word: 'Ø¶ÙØ±Ù’Ø¨', meaning: 'Ø§Ù„Ø¶Ø±Ø¨'},
        kasra: {icon: 'ğŸ¸', word: 'Ø¶ÙÙÙ’Ø¯ÙØ¹', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø¶ÙØ¯Ø¹'},
        damma: {icon: 'ğŸŒ…', word: 'Ø¶ÙØ­Ù‹Ù‰', meaning: 'ÙˆÙ‚Øª Ø§Ù„Ø¶Ø­Ù‰'}
      },
      'Ø·': {
        name: 'Ø§Ù„Ø·Ø§Ø¡',
        fatha: {icon: 'ğŸ¦’', word: 'Ø·ÙÙˆÙÙŠÙ„', meaning: 'Ø·ÙˆÙŠÙ„ Ø§Ù„Ù‚Ø§Ù…Ø©'},
        kasra: {icon: 'ğŸ‘¶', word: 'Ø·ÙÙÙ’Ù„', meaning: 'Ø·ÙÙ„ ØµØºÙŠØ±'},
        damma: {icon: 'ğŸ›Ÿ', word: 'Ø·ÙÙÙØ§Ø­', meaning: 'Ù…ÙƒØ§Ù† Ø§Ù„Ø·ÙÙˆ'}
      },
      'Ø¸': {
        name: 'Ø§Ù„Ø¸Ø§Ø¡',
        fatha: {icon: 'ğŸŒ‘', word: 'Ø¸ÙÙ‡Ù’Ø±', meaning: 'Ø§Ù„Ø¸Ù‡Ø±'},
        kasra: {icon: 'ğŸŒ³', word: 'Ø¸ÙÙ„Ù‘', meaning: 'Ø§Ù„Ø¸Ù„'},
        damma: {icon: 'ğŸŒŒ', word: 'Ø¸ÙÙ„ÙÙ…ÙØ§Øª', meaning: 'Ø§Ù„Ø¸Ù„Ù…Ø§Øª'}
      },
      'Ø¹': {
        name: 'Ø§Ù„Ø¹ÙŠÙ†',
        fatha: {icon: 'ğŸ¯', word: 'Ø¹ÙØ³ÙÙ„', meaning: 'Ø§Ù„Ø¹Ø³Ù„'},
        kasra: {icon: 'ğŸ“š', word: 'Ø¹ÙÙ„Ù’Ù…', meaning: 'Ø§Ù„Ø¹Ù„Ù…'},
        damma: {icon: 'ğŸ‘´', word: 'Ø¹ÙÙ…Ù’Ø±', meaning: 'Ø§Ù„Ø¹Ù…Ø±'}
      },
      'Øº': {
        name: 'Ø§Ù„ØºÙŠÙ†',
        fatha: {icon: 'ğŸ˜ ', word: 'ØºÙØ¶ÙØ¨', meaning: 'Ø§Ù„ØºØ¶Ø¨'},
        kasra: {icon: 'ğŸ—¡ï¸', word: 'ØºÙÙ…ÙØ§Ø¯', meaning: 'Ø§Ù„ØºÙ…Ø§Ø¯'},
        damma: {icon: 'ğŸ ', word: 'ØºÙØ±Ù’ÙÙØ©', meaning: 'Ø§Ù„ØºØ±ÙØ©'}
      },
      'Ù': {
        name: 'Ø§Ù„ÙØ§Ø¡',
        fatha: {icon: 'ğŸ´', word: 'ÙÙØ±ÙØ³', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„ÙØ±Ø³'},
        kasra: {icon: 'ğŸ˜', word: 'ÙÙÙŠÙ„', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„ÙÙŠÙ„'},
        damma: {icon: 'ğŸ«˜', word: 'ÙÙÙˆÙ„', meaning: 'Ù†Ø¨Ø§Øª Ø§Ù„ÙÙˆÙ„'}
      },
      'Ù‚': {
        name: 'Ø§Ù„Ù‚Ø§Ù',
        fatha: {icon: 'âœï¸', word: 'Ù‚ÙÙ„ÙÙ…', meaning: 'Ø£Ø¯Ø§Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©'},
        kasra: {icon: 'ğŸ’', word: 'Ù‚ÙØ±Ù’Ø¯', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù‚Ø±Ø¯'},
        damma: {icon: 'ğŸ’', word: 'Ù‚ÙØ±Ù’Ø·', meaning: 'Ø§Ù„Ø­Ù„Ù‚ (Ø§Ù„Ù‚Ø±Ø·)'}
      },
      'Ùƒ': {
        name: 'Ø§Ù„ÙƒØ§Ù',
        fatha: {icon: 'ğŸ•', word: 'ÙƒÙÙ„Ù’Ø¨', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„ÙƒÙ„Ø¨'},
        kasra: {icon: 'ğŸ“–', word: 'ÙƒÙØªÙØ§Ø¨', meaning: 'Ø§Ù„ÙƒØªØ§Ø¨'},
        damma: {icon: 'ğŸª‘', word: 'ÙƒÙØ±Ù’Ø³ÙÙŠ', meaning: 'Ø§Ù„ÙƒØ±Ø³ÙŠ'}
      },
      'Ù„': {
        name: 'Ø§Ù„Ù„Ø§Ù…',
        fatha: {icon: 'ğŸ‹', word: 'Ù„ÙÙŠÙ’Ù…ÙÙˆÙ†', meaning: 'ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†'},
        kasra: {icon: 'ğŸ‘•', word: 'Ù„ÙØ¨ÙØ§Ø³', meaning: 'Ø§Ù„Ù„Ø¨Ø§Ø³'},
        damma: {icon: 'ğŸ—£ï¸', word: 'Ù„ÙØºÙØ©', meaning: 'Ø§Ù„Ù„ØºØ©'}
      },
      'Ù…': {
        name: 'Ø§Ù„Ù…ÙŠÙ…',
        fatha: {icon: 'ğŸ™ï¸', word: 'Ù…ÙØ¯ÙÙŠÙ†ÙØ©', meaning: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©'},
        kasra: {icon: 'ğŸ”‘', word: 'Ù…ÙÙÙ’ØªÙØ§Ø­', meaning: 'Ø§Ù„Ù…ÙØªØ§Ø­'},
        damma: {icon: 'ğŸ•¯ï¸', word: 'Ù…ÙØ´Ù’Ùƒ', meaning: 'Ø§Ù„Ù…Ø´Ùƒ'}
      },
      'Ù†': {
        name: 'Ø§Ù„Ù†ÙˆÙ†',
        fatha: {icon: 'ğŸŒŠ', word: 'Ù†ÙÙ‡Ù’Ø±', meaning: 'Ø§Ù„Ù†Ù‡Ø±'},
        kasra: {icon: 'ğŸ¯', word: 'Ù†ÙÙ…Ù’Ø±', meaning: 'Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù†Ù…Ø±'},
        damma: {icon: 'ğŸ’¡', word: 'Ù†ÙÙˆØ±', meaning: 'Ø§Ù„Ù†ÙˆØ±'}
      },
      'Ù‡Ù€': {
        name: 'Ø§Ù„Ù‡Ø§Ø¡',
        fatha: {icon: 'ğŸŒ³', word: 'Ø­ÙØ¯ÙÙŠÙ‚ÙØ©', meaning: 'Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø©'},
        kasra: {icon: 'ğŸ’ª', word: 'Ù‡ÙÙ…ÙÙ…', meaning: 'Ø§Ù„Ù‡Ù…Ù…'},
        damma: {icon: 'ğŸš§', word: 'Ø­ÙØ¯ÙÙˆØ¯', meaning: 'Ø§Ù„Ø­Ø¯ÙˆØ¯'}
      },
      'Ùˆ': {
        name: 'Ø§Ù„ÙˆØ§Ùˆ',
        fatha: {icon: 'ğŸŒ¹', word: 'ÙˆÙØ±Ù’Ø¯', meaning: 'Ø§Ù„ÙˆØ±Ø¯'},
        kasra: {icon: 'ğŸ›ï¸', word: 'ÙˆÙØ³ÙØ§Ø¯', meaning: 'Ø§Ù„ÙˆØ³Ø§Ø¯Ø©'},
        damma: {icon: 'ğŸŒ', word: 'ÙˆÙØ¬ÙÙˆØ¯', meaning: 'Ø§Ù„ÙˆØ¬ÙˆØ¯'}
      },
      'ÙŠ': {
        name: 'Ø§Ù„ÙŠØ§Ø¡',
        fatha: {icon: 'âœ‹', word: 'ÙŠÙØ¯', meaning: 'Ø§Ù„ÙŠØ¯'},
        kasra: {icon: 'ğŸŒ¸', word: 'ÙŠÙØ§Ø³ÙÙ…ÙÙŠÙ†', meaning: 'Ø²Ù‡Ø±Ø© Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†'},
        damma: {icon: 'ğŸ˜Œ', word: 'ÙŠÙØ³Ù’Ø±', meaning: 'Ø§Ù„ÙŠØ³Ø±'}
      }
    };
    
    // Ù…ØªØºÙŠØ±Ø§Øª Three.js
    let scene, camera, renderer, controls;
    let letterObjects = [];
    let completedLetters = [];
    let viewedHarakat = {};
    let currentLetter = '';
    let currentLetterName = '';
    let currentLetterIcon = '';
    let currentLetterIndex = -1;
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    document.addEventListener('DOMContentLoaded', function() {
      renderStars();
      init3DScene();
      setupEventListeners();
      loadProgress();
    });
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
    function renderStars() {
      const container = document.getElementById('stars-container');
      container.innerHTML = '';
      
      for (let i = 0; i < letters.length; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.id = `star-${i}`;
        star.textContent = 'â˜…';
        container.appendChild(star);
      }
    }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯
    function init3DScene() {
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x74b9ff);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 5, 15);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ø§Ø±Ø¶
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.shadowMap.enabled = true;
      document.getElementById('game-container').appendChild(renderer.domElement);
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø´Ù‡Ø¯
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.minDistance = 5;
      controls.maxDistance = 50;
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
      scene.add(ambientLight);
      
      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
      directionalLight.position.set(10, 20, 15);
      directionalLight.castShadow = true;
      scene.add(directionalLight);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø±Ø¶ÙŠØ©
      const groundGeometry = new THREE.CircleGeometry(30, 32);
      const groundMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x00b894,
        roughness: 0.8,
        metalness: 0.2
      });
      const ground = new THREE.Mesh(groundGeometry, groundMaterial);
      ground.rotation.x = -Math.PI / 2;
      ground.receiveShadow = true;
      scene.add(ground);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø§Ø¦Ù…Ø©
      createFloatingLetters();
      
      // Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø´Ø¬Ø§Ø± ÙˆØ§Ù„Ù†Ø¨Ø§ØªØ§Øª Ù„Ù„Ø¬Ùˆ
      createEnvironment();
      
      // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
      animate();
      
      // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
      setTimeout(() => {
        document.getElementById('loading-screen').style.display = 'none';
      }, 2000);
    }
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø§Ø¦Ù…Ø©
    function createFloatingLetters() {
      const radius = 12;
      const angleStep = (2 * Math.PI) / letters.length;
      
      letters.forEach((letter, index) => {
        const angle = index * angleStep;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;
        const y = 2 + Math.random() * 3;
        
        // Ø¥Ù†Ø§Ø¡ Ù†ØµÙŠ Ù„Ù„Ø­Ø±Ù
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        canvas.width = 256;
        canvas.height = 256;
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
        context.fillStyle = colors[index % colors.length];
        context.fillRect(0, 0, canvas.width, canvas.height);
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø±Ù
        context.font = 'Bold 150px Amiri';
        context.textAlign = 'center';
        context.textBaseline = 'middle';
        context.fillStyle = 'white';
        context.fillText(letter.char, canvas.width / 2, canvas.height / 2);
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¯Ø©
        const texture = new THREE.CanvasTexture(canvas);
        const material = new THREE.MeshBasicMaterial({ 
          map: texture,
          transparent: true
        });
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´ÙƒÙ„
        const geometry = new THREE.PlaneGeometry(2, 2);
        const mesh = new THREE.Mesh(geometry, material);
        
        // ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø±Ù ÙÙŠ Ø§Ù„Ù…Ø´Ù‡Ø¯
        mesh.position.set(x, y, z);
        mesh.lookAt(0, y, 0);
        
        // Ø¥Ø¶Ø§ÙØ© ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
        mesh.userData = {
          letter: letter.char,
          name: letter.name,
          icon: letter.icon,
          index: index
        };
        
        // Ø¬Ø¹Ù„ Ø§Ù„Ø­Ø±Ù Ù‚Ø§Ø¨Ù„Ø§Ù‹ Ù„Ù„Ù†Ù‚Ø±
        mesh.userData.isClickable = true;
        
        scene.add(mesh);
        letterObjects.push(mesh);
        
        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø·ÙÙˆ Ø¨Ø³ÙŠØ·
        animateLetterFloat(mesh, y);
      });
    }
    
    // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø·ÙÙˆ Ù„Ù„Ø­Ø±ÙˆÙ
    function animateLetterFloat(mesh, baseY) {
      const startTime = Date.now();
      
      function float() {
        const elapsed = (Date.now() - startTime) / 1000;
        mesh.position.y = baseY + Math.sin(elapsed) * 0.5;
        mesh.rotation.y = elapsed * 0.5;
        
        requestAnimationFrame(float);
      }
      
      float();
    }
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø­ÙŠØ·Ø©
    function createEnvironment() {
      // Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø´Ø¬Ø§Ø±
      for (let i = 0; i < 15; i++) {
        const angle = Math.random() * Math.PI * 2;
        const distance = 15 + Math.random() * 10;
        const x = Math.cos(angle) * distance;
        const z = Math.sin(angle) * distance;
        
        // Ø¬Ø°Ø¹ Ø§Ù„Ø´Ø¬Ø±Ø©
        const trunkGeometry = new THREE.CylinderGeometry(0.3, 0.4, 2, 8);
        const trunkMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
        const trunk = new THREE.Mesh(trunkGeometry, trunkMaterial);
        trunk.position.set(x, 1, z);
        scene.add(trunk);
        
        // ØªØ§Ø¬ Ø§Ù„Ø´Ø¬Ø±Ø©
        const crownGeometry = new THREE.SphereGeometry(1.5, 8, 6);
        const crownMaterial = new THREE.MeshStandardMaterial({ color: 0x2ecc71 });
        const crown = new THREE.Mesh(crownGeometry, crownMaterial);
        crown.position.set(x, 3, z);
        scene.add(crown);
      }
      
      // Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„Ø²Ù‡ÙˆØ±
      for (let i = 0; i < 30; i++) {
        const angle = Math.random() * Math.PI * 2;
        const distance = 5 + Math.random() * 20;
        const x = Math.cos(angle) * distance;
        const z = Math.sin(angle) * distance;
        
        const flowerGeometry = new THREE.SphereGeometry(0.3, 6, 6);
        const flowerMaterial = new THREE.MeshStandardMaterial({ 
          color: new THREE.Color().setHSL(Math.random(), 0.8, 0.7) 
        });
        const flower = new THREE.Mesh(flowerGeometry, flowerMaterial);
        flower.position.set(x, 0.3, z);
        scene.add(flower);
      }
    }
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    function setupEventListeners() {
      // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ Ù„Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±ÙˆÙ
      renderer.domElement.addEventListener('click', onCanvasClick, false);
      
      // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
      document.getElementById('zoom-in').addEventListener('click', () => {
        camera.position.multiplyScalar(0.9);
      });
      
      document.getElementById('zoom-out').addEventListener('click', () => {
        camera.position.multiplyScalar(1.1);
      });
      
      document.getElementById('reset-view').addEventListener('click', () => {
        camera.position.set(0, 5, 15);
        controls.reset();
      });
      
      document.getElementById('instructions-btn').addEventListener('click', showInstructions);
      
      // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¬Ù… Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
      window.addEventListener('resize', onWindowResize, false);
    }
    
    // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ù‡Ø¯
    function onCanvasClick(event) {
      event.preventDefault();
      
      // Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‚Ø± ÙÙŠ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…Ø´Ù‡Ø¯
      const mouse = new THREE.Vector2();
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø¹Ø§Ø¹ Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
      const raycaster = new THREE.Raycaster();
      raycaster.setFromCamera(mouse, camera);
      
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ù…Ø¹ Ø§Ù„Ø­Ø±ÙˆÙ
      const intersects = raycaster.intersectObjects(letterObjects);
      
      if (intersects.length > 0) {
        const object = intersects[0].object;
        if (object.userData.isClickable) {
          const letterData = object.userData;
          showPopup(letterData.letter, letterData.name, letterData.icon, letterData.index);
        }
      }
    }
    
    // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¬Ù… Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }
    
    // Ø¯ÙˆØ±Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showPopup(letter, name, icon, index) {
      currentLetter = letter;
      currentLetterName = name;
      currentLetterIcon = icon;
      currentLetterIndex = index;
      
      document.getElementById('popup-title').textContent = name;
      document.getElementById('letter-display').textContent = letter;
      document.getElementById('popup').style.display = 'flex';
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
      const example = document.getElementById('example');
      example.classList.add('active');
      document.getElementById('example-icon').textContent = icon;
      document.getElementById('example-name').textContent = name;
      document.getElementById('haraka-name').textContent = 'Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ';
      
      // Ù†Ø·Ù‚ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
      speakLetter(letter);
    }
    
    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function hidePopup() {
      document.getElementById('popup').style.display = 'none';
      checkLetterCompletion();
    }
    
    // Ø¹Ø±Ø¶ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    function showInstructions() {
      document.getElementById('instructions-popup').style.display = 'flex';
    }
    
    // Ø¥Ø®ÙØ§Ø¡ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    function hideInstructions() {
      document.getElementById('instructions-popup').style.display = 'none';
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø«Ø§Ù„ Ù„Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
    function showExample(letter, haraka, index) {
      const letterData = examples[letter];
      if (!letterData) return;
      
      const harakaData = letterData[haraka];
      if (!harakaData) {
        document.getElementById('example-icon').textContent = 'â“';
        document.getElementById('example-name').textContent = 'Ù…Ø«Ø§Ù„ ØºÙŠØ± Ù…ØªÙˆÙØ±';
        document.getElementById('haraka-name').textContent = '';
        return;
      }
      
      const example = document.getElementById('example');
      example.classList.add('active');
      
      document.getElementById('example-icon').textContent = harakaData.icon;
      document.getElementById('example-name').textContent = harakaData.word;
      
      let harakaText = '';
      switch(haraka) {
        case 'fatha': harakaText = 'Ù…Ø¹ Ø§Ù„ÙØªØ­Ø© (' + harakaData.meaning + ')'; break;
        case 'kasra': harakaText = 'Ù…Ø¹ Ø§Ù„ÙƒØ³Ø±Ø© (' + harakaData.meaning + ')'; break;
        case 'damma': harakaText = 'Ù…Ø¹ Ø§Ù„Ø¶Ù…Ø© (' + harakaData.meaning + ')'; break;
      }
      document.getElementById('haraka-name').textContent = harakaText;
      
      // ØªØ³Ø¬ÙŠÙ„ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø±ÙƒØ©
      if (!viewedHarakat[letter]) {
        viewedHarakat[letter] = [];
      }
      if (!viewedHarakat[letter].includes(haraka)) {
        viewedHarakat[letter].push(haraka);
      }
      
      speakLetter(letter + getHarakaSymbol(haraka), harakaData.word);
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø­Ø±Ù
    function checkLetterCompletion() {
      if (!currentLetter || !viewedHarakat[currentLetter] || viewedHarakat[currentLetter].length < 3) {
        return;
      }
      
      if (!completedLetters.includes(currentLetter)) {
        completedLetters.push(currentLetter);
        updateStars();
        showCelebration();
        saveProgress();
      }
    }
    
    // Ø¹Ø±Ø¶ Ø§Ø­ØªÙØ§Ù„ÙŠØ© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
    function showCelebration() {
      const celebration = document.createElement('div');
      celebration.className = 'celebration';
      
      const content = document.createElement('div');
      content.className = 'celebration-content';
      
      const emoji = document.createElement('div');
      emoji.className = 'celebration-emoji';
      emoji.textContent = 'ğŸ¤©';
      
      // Ø¥Ø¶Ø§ÙØ© Ù†Ø¬ÙˆÙ… Ù…ØªØ­Ø±ÙƒØ© Ø­ÙˆÙ„ Ø§Ù„Ø³Ù…Ø§ÙŠÙ„
      for (let i = 0; i < 5; i++) {
        const star = document.createElement('div');
        star.className = 'celebration-stars';
        star.textContent = 'ğŸŒŸâ­';
        star.style.left = `${Math.random() * 100 + 50}%`;
        star.style.top = `${Math.random() * 50 + 30}%`;
        star.style.animationDelay = `${i * 0.2}s`;
        content.appendChild(star);
      }
      
      const message = document.createElement('div');
      message.className = 'celebration-message';
      message.textContent = `Ù…Ø¨Ø±ÙˆÙƒ! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù†Ø¬Ù…Ø© ${currentLetterName}`;
      
      content.appendChild(emoji);
      content.appendChild(message);
      celebration.appendChild(content);
      document.body.appendChild(celebration);
      
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø§Ø­ØªÙØ§Ù„ÙŠØ© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
      setTimeout(() => {
        celebration.style.animation = 'fadeIn 0.5s ease reverse';
        setTimeout(() => {
          document.body.removeChild(celebration);
        }, 500);
      }, 5000);
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ… ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
    function updateStars() {
      completedLetters.forEach((letter, index) => {
        const star = document.getElementById(`star-${index}`);
        if (star) {
          star.classList.add('active');
        }
      });
    }
    
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø­Ø±ÙƒØ©
    function getHarakaSymbol(haraka) {
      switch(haraka) {
        case 'fatha': return '\u064e';
        case 'kasra': return '\u0650';
        case 'damma': return '\u064f';
        default: return '';
      }
    }
    
    // Ù†Ø·Ù‚ Ø§Ù„Ø­Ø±Ù ÙˆØ§Ù„ÙƒÙ„Ù…Ø©
    function speakLetter(text, word = '') {
      // Ø¥Ù„ØºØ§Ø¡ Ø£ÙŠ Ù†Ø·Ù‚ Ø¬Ø§Ø±ÙŠ
      window.speechSynthesis.cancel();
      
      // Ù†Ø·Ù‚ Ø§Ù„Ø­Ø±Ù Ù…Ø¹ Ø§Ù„Ø­Ø±ÙƒØ©
      const charMsg = new SpeechSynthesisUtterance();
      charMsg.lang = "ar-SA";
      charMsg.text = text;
      charMsg.pitch = 1.5; // ØµÙˆØª Ø£Ø¹Ù„Ù‰ ÙˆØ£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ø§Ù‹
      charMsg.rate = 0.8; // Ø³Ø±Ø¹Ø© Ø£Ù‚Ù„ Ù„Ù„ÙÙ‡Ù… Ø§Ù„Ø£ÙØ¶Ù„
      
      // Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ø«Ø§Ù„
      const wordMsg = new SpeechSynthesisUtterance();
      wordMsg.lang = "ar-SA";
      wordMsg.text = word;
      wordMsg.pitch = 1.4;
      wordMsg.rate = 0.7;
      
      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ ØµÙˆØª Ù…ØªØ§Ø­
      const voices = window.speechSynthesis.getVoices();
      
      // Ø§Ù„Ø£ÙØ¶Ù„ÙŠØ© Ù„Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ø·ÙÙˆÙ„ÙŠØ©
      const childVoice = voices.find(v => 
        v.name.includes("Child") || 
        v.name.includes("Girl") || 
        v.name.includes("Ø·ÙÙ„") || 
        v.name.includes("Ø·ÙÙ„Ø©")
      );
      
      // Ø«Ù… Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ø£Ù†Ø«ÙˆÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
      const arabicFemaleVoice = voices.find(v => 
        v.lang.includes("ar") && 
        v.name.includes("Female")
      );
      
      // Ø«Ù… Ø£ÙŠ ØµÙˆØª Ø¹Ø±Ø¨ÙŠ
      const arabicVoice = voices.find(v => v.lang.includes("ar"));
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙˆØª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      if (childVoice) {
        charMsg.voice = childVoice;
        wordMsg.voice = childVoice;
      } else if (arabicFemaleVoice) {
        charMsg.voice = arabicFemaleVoice;
        wordMsg.voice = arabicFemaleVoice;
      } else if (arabicVoice) {
        charMsg.voice = arabicVoice;
        wordMsg.voice = arabicVoice;
      }
      
      // Ù†Ø·Ù‚ Ø§Ù„Ø­Ø±Ù Ø«Ù… Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
      window.speechSynthesis.speak(charMsg);
      
      if (word) {
        setTimeout(() => {
          window.speechSynthesis.speak(wordMsg);
        }, 500);
      }
    }
    
    // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù… ÙÙŠ localStorage
    function saveProgress() {
      const progress = {
        completedLetters: completedLetters,
        viewedHarakat: viewedHarakat
      };
      localStorage.setItem('arabicLettersProgress', JSON.stringify(progress));
    }
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù… Ù…Ù† localStorage
    function loadProgress() {
      const savedProgress = localStorage.getItem('arabicLettersProgress');
      if (savedProgress) {
        const progress = JSON.parse(savedProgress);
        completedLetters = progress.completedLetters || [];
        viewedHarakat = progress.viewedHarakat || {};
        updateStars();
      }
    }
  </script>
</body>
</html>