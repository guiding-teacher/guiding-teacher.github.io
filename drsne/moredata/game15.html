<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3498db;
            --warning: #f1c40f;
            --danger: #e74c3c;
            --info: #1abc9c;
            --dark: #2c3e50;
            --bg: #ecf0f1;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: var(--dark);
            padding-bottom: 60px; /* Ù…Ø³Ø§ÙØ© Ù„Ù…Ø¤Ø´Ø± Ø§Ù„ØµÙˆØª */
        }

        header {
            background: linear-gradient(135deg, var(--primary), #2980b9);
            color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        header h1 { margin: 0; font-size: 1.5rem; }
        header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.9; }

        /* --- Ù‚Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© --- */
        .interactive-container {
            position: relative;
            max-width: 600px;
            width: 95%;
            margin: 20px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            background: #fff;
            border: 3px solid #fff;
        }

        .interactive-container img {
            width: 100%;
            display: block;
            object-fit: cover;
        }

        /* Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø³Ø§Ø®Ù†Ø© */
        .hotspot {
            position: absolute;
            width: 30px;
            height: 30px;
            background: var(--warning);
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            border: 2px solid #fff;
            box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7);
            animation: pulse 1.5s infinite;
        }
        
        .hs-1 { top: 15%; left: 45%; } /* Ø§Ù„Ø´Ø±Ø·ÙŠ */
        .hs-2 { top: 65%; left: 35%; } /* Ø§Ù„Ø·Ù„Ø§Ø¨ */
        .hs-3 { top: 42%; left: 25%; } /* Ø§Ù„Ù…Ù…Ø± */
        .hs-4 { top: 55%; right: 15%; } /* Ø§Ù„Ù…Ø¯Ø±Ø³Ø© */

        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(241, 196, 15, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(241, 196, 15, 0); }
        }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙÙˆÙ‚ Ø§Ù„ØµÙˆØ±Ø© (Overlay) */
        .info-overlay {
            position: absolute;
            bottom: 10px;
            left: 2%;
            width: 96%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 12px;
            padding: 15px;
            box-sizing: border-box;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            z-index: 20;
            animation: slideUp 0.3s ease-out;
            border-right: 4px solid var(--primary);
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .overlay-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .overlay-title { margin: 0; font-size: 1rem; color: var(--primary); font-weight: bold; }
        .close-btn { cursor: pointer; background: #eee; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }
        .overlay-text { margin: 0; font-size: 0.85rem; color: #444; line-height: 1.5; }

        /* --- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª --- */
        .signs-wrapper {
            max-width: 800px;
            margin: 0 auto;
            padding: 10px;
        }

        .section-title {
            font-size: 1rem;
            margin: 20px 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #ddd;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .t-warn { color: #d35400; border-color: #d35400; }
        .t-stop { color: var(--danger); border-color: var(--danger); }
        .t-info { color: var(--info); border-color: var(--info); }

        /* Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨Ø© (3 Ø£Ø¹Ù…Ø¯Ø© ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„) */
        .signs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± */
            gap: 8px;
        }

        /* ØªØ®ØµÙŠØµ Ù„Ù„Ø¬ÙˆØ§Ù„ Ù„Ø¶Ù…Ø§Ù† 3 Ø£Ø¹Ù…Ø¯Ø© */
        @media (max-width: 768px) {
            .signs-grid {
                grid-template-columns: repeat(3, 1fr); /* 3 Ø£Ø¹Ù…Ø¯Ø© Ø«Ø§Ø¨ØªØ© */
            }
        }

        .sign-card {
            background: white;
            border-radius: 8px;
            padding: 8px 4px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 90px; /* Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª ÙˆØµØºÙŠØ± */
        }

        .sign-card:active { transform: scale(0.95); background: #f9f9f9; }

        .sign-icon { font-size: 2rem; line-height: 1; margin-bottom: 5px; }
        .sign-name { font-size: 0.7rem; font-weight: bold; color: #333; line-height: 1.2; overflow: hidden; }

        /* Ù…Ø¤Ø´Ø± Ø§Ù„ØµÙˆØª */
        .audio-status {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: none;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

    </style>
</head>
<body>

    <header>
        <h1>ğŸš¦ Ù…Ø¯Ø±Ø³ØªÙŠ Ø§Ù„Ø¢Ù…Ù†Ø©</h1>
        <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ù„Ù„ØªØ¹Ù„Ù…</p>
    </header>

    <!-- Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
    <div class="interactive-container">
        <!-- Ø¶Ø¹ Ø§Ø³Ù… ØµÙˆØ±ØªÙƒ Ù‡Ù†Ø§ -->
        <img src="/drsne/images/ga15.jpg" alt="ØµÙˆØ±Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©" onerror="this.src='https://via.placeholder.com/600x450?text=ØµÙˆØ±Ø©+Ø§Ù„Ø¯Ø±Ø³'">
        
        <!-- Ø§Ù„Ù†Ù‚Ø§Ø· -->
        <div class="hotspot hs-1" onclick="showOverlay('police')">ğŸ‘®â€â™‚ï¸</div>
        <div class="hotspot hs-2" onclick="showOverlay('kids')">ğŸ’</div>
        <div class="hotspot hs-3" onclick="showOverlay('crosswalk')">ğŸ¦“</div>
        <div class="hotspot hs-4" onclick="showOverlay('school')">ğŸ«</div>

        <!-- Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© ÙÙˆÙ‚ Ø§Ù„ØµÙˆØ±Ø© -->
        <div class="info-overlay" id="imageOverlay">
            <div class="overlay-header">
                <h3 class="overlay-title" id="ovTitle">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h3>
                <span class="close-btn" onclick="closeOverlay()">âœ•</span>
            </div>
            <p class="overlay-text" id="ovText">Ø§Ù„Ù†Øµ Ù‡Ù†Ø§...</p>
        </div>
    </div>

    <!-- Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª -->
    <div class="signs-wrapper">
        
        <div class="section-title t-warn">âš ï¸ Ø¥Ø´Ø§Ø±Ø§Øª ØªØ­Ø°ÙŠØ±ÙŠØ©</div>
        <div class="signs-grid" id="gridWarn"></div>

        <div class="section-title t-stop">â›” Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø¹</div>
        <div class="signs-grid" id="gridStop"></div>

        <div class="section-title t-info">â„¹ï¸ Ø¥Ø´Ø§Ø±Ø§Øª Ø¥Ø±Ø´Ø§Ø¯ÙŠØ©</div>
        <div class="signs-grid" id="gridInfo"></div>

    </div>

    <div class="audio-status" id="audioStatus">ğŸ”Š Ø¬Ø§Ø±Ù Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©...</div>

    <script>
        /* --- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª --- */
        const scenarios = {
            police: { title: "Ø§Ù„Ø´Ø±Ø·ÙŠ ØµØ¯ÙŠÙ‚Ù†Ø§", text: "ÙŠÙ‚Ù Ø§Ù„Ø´Ø±Ø·ÙŠ Ù„ÙŠÙˆÙ‚Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø­ØªÙ‰ Ù†Ø¹Ø¨Ø± Ø¨Ø£Ù…Ø§Ù†. ÙŠØ¬Ø¨ Ø£Ù† Ù†Ø·ÙŠØ¹Ù‡ Ø¯Ø§Ø¦Ù…Ø§Ù‹." },
            kids: { title: "Ø§Ù„Ù†Ø¸Ø§Ù…", text: "Ù†Ø³ÙŠØ± ÙÙŠ ØµÙ ÙˆØ§Ø­Ø¯ØŒ Ù„Ø§ Ù†Ø±ÙƒØ¶ØŒ ÙˆÙ†Ù†Ø¸Ø± ÙŠÙ…ÙŠÙ†Ø§Ù‹ ÙˆÙŠØ³Ø§Ø±Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ø¨ÙˆØ±." },
            crosswalk: { title: "Ù…Ù…Ø± Ø§Ù„Ù…Ø´Ø§Ø©", text: "Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ù‡ÙŠ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù„Ù†Ø§ Ø¨Ø¹Ø¨ÙˆØ± Ø§Ù„Ø´Ø§Ø±Ø¹ Ù…Ù†Ù‡." },
            school: { title: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø©", text: "ÙˆØµÙ„Ù†Ø§! Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ ÙŠÙˆØµÙ„Ù†Ø§ Ù„Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆÙ†Ø­Ù† Ø³Ø§Ù„Ù…ÙˆÙ† ÙˆØ¨ØµØ­Ø© Ø¬ÙŠØ¯Ø©." }
        };

        const signs = [
            // ØªØ­Ø°ÙŠØ±ÙŠØ©
            { t: 'w', i: 'ğŸš¸', n: 'Ù…Ù†Ø·Ù‚Ø© Ù…Ø¯Ø§Ø±Ø³', d: 'Ø®ÙÙ Ø§Ù„Ø³Ø±Ø¹Ø©ØŒ Ø·Ù„Ø§Ø¨ Ù…Ø¯Ø§Ø±Ø³.' },
            { t: 'w', i: 'ğŸš¦', n: 'Ø¥Ø´Ø§Ø±Ø© Ø¶ÙˆØ¦ÙŠØ©', d: 'Ø¥Ø´Ø§Ø±Ø© Ù…Ø±ÙˆØ± Ø£Ù…Ø§Ù…Ùƒ.' },
            { t: 'w', i: 'ğŸš§', n: 'Ø£Ø´ØºØ§Ù„', d: 'Ø¹Ù…Ø§Ù„ ÙŠØ¹Ù…Ù„ÙˆÙ† Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚.' },
            { t: 'w', i: 'âš½', n: 'Ø£Ø·ÙØ§Ù„', d: 'Ø§Ø­Ø°Ø± Ø®Ø±ÙˆØ¬ Ø£Ø·ÙØ§Ù„.' },
            { t: 'w', i: 'ğŸª', n: 'Ù…Ø·Ø¨', d: 'Ù…Ø·Ø¨ ØµÙ†Ø§Ø¹ÙŠØŒ Ù‡Ø¯Ø¦ Ø§Ù„Ø³Ø±Ø¹Ø©.' },
            { t: 'w', i: 'ğŸ“‰', n: 'Ù…Ù†Ø­Ø¯Ø±', d: 'Ø§Ù„Ø·Ø±ÙŠÙ‚ ÙŠÙ†Ø²Ù„ Ù„Ø£Ø³ÙÙ„.' },
            
            // Ù…Ù†Ø¹
            { t: 's', i: 'ğŸ›‘', n: 'Ù‚Ù', d: 'ØªÙˆÙ‚Ù ØªØ§Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ø¨ÙˆØ±.' },
            { t: 's', i: 'â›”', n: 'Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®ÙˆÙ„', d: 'Ø·Ø±ÙŠÙ‚ Ø¹ÙƒØ³ÙŠ.' },
            { t: 's', i: 'ğŸš«', n: 'Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆÙ', d: 'Ù„Ø§ ØªØ±ÙƒÙ† Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù‡Ù†Ø§.' },
            { t: 's', i: 'ğŸ“µ', n: 'Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¬ÙˆØ§Ù„', d: 'Ø±ÙƒØ² ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚.' },
            { t: 's', i: 'ğŸ”', n: 'Ø³Ø±Ø¹Ø© 30', d: 'Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù‚ØµÙˆÙ‰ 30.' },
            { t: 's', i: 'â†ªï¸', n: 'Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ±Ø§Ù†', d: 'Ù„Ø§ ØªØ±Ø¬Ø¹ Ù„Ù„Ø®Ù„Ù.' },

            // Ø¥Ø±Ø´Ø§Ø¯ÙŠØ©
            { t: 'i', i: 'ğŸš¶', n: 'Ù…Ù…Ø± Ù…Ø´Ø§Ø©', d: 'Ø§Ø¹Ø¨Ø± Ù…Ù† Ù‡Ù†Ø§.' },
            { t: 'i', i: 'ğŸ…¿ï¸', n: 'Ù…ÙˆÙ‚Ù', d: 'Ù…ÙˆÙ‚Ù Ø³ÙŠØ§Ø±Ø§Øª.' },
            { t: 'i', i: 'ğŸ¥', n: 'Ù…Ø³ØªØ´ÙÙ‰', d: 'Ù…Ø³ØªØ´ÙÙ‰ Ù‚Ø±ÙŠØ¨.' },
            { t: 'i', i: 'â™¿', n: 'Ø°ÙˆÙŠ Ø§Ù„Ù‡Ù…Ù…', d: 'Ù…ÙˆÙ‚Ù Ø®Ø§Øµ.' },
            { t: 'i', i: 'ğŸš²', n: 'Ø¯Ø±Ø§Ø¬Ø§Øª', d: 'Ù…Ø³Ø§Ø± Ø¯Ø±Ø§Ø¬Ø§Øª.' },
            { t: 'i', i: 'â›½', n: 'Ù…Ø­Ø·Ø©', d: 'Ù…Ø­Ø·Ø© ÙˆÙ‚ÙˆØ¯.' },
        ];

        /* --- Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ --- */
        
        // 1. ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª
        function renderSigns() {
            const grids = {
                w: document.getElementById('gridWarn'),
                s: document.getElementById('gridStop'),
                i: document.getElementById('gridInfo')
            };

            signs.forEach(s => {
                const el = document.createElement('div');
                el.className = 'sign-card';
                el.innerHTML = `<div class="sign-icon">${s.i}</div><div class="sign-name">${s.n}</div>`;
                el.onclick = () => speak(s.n + ". " + s.d);
                if(grids[s.t]) grids[s.t].appendChild(el);
            });
        }

        // 2. Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø§ÙØ°Ø© ÙÙˆÙ‚ Ø§Ù„ØµÙˆØ±Ø©
        const overlay = document.getElementById('imageOverlay');
        const ovTitle = document.getElementById('ovTitle');
        const ovText = document.getElementById('ovText');

        function showOverlay(key) {
            const data = scenarios[key];
            ovTitle.innerText = data.title;
            ovText.innerText = data.text;
            overlay.style.display = 'block';
            speak(data.text);
        }

        function closeOverlay() {
            overlay.style.display = 'none';
            stopSpeech();
        }

        // 3. Ø§Ù„ØµÙˆØª
        // =========================================================
        // Ø¯Ø§Ù„Ø© Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„Ù…ÙˆØ­Ø¯Ø© (ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ù…ØªØµÙØ­)
        // =========================================================
        function speak(text) {
            // 1. Ø§Ù„ØªØ­Ù‚Ù‚: Ù‡Ù„ Ù†Ø­Ù† Ø¯Ø§Ø®Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ØŸ
            if (typeof Android !== 'undefined' && Android.speakArabic) {
                // Ù†Ø¹Ù…: Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø§Ø·Ù‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ (Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© + ÙŠØ¹Ù…Ù„ Ø£ÙˆÙÙ„Ø§ÙŠÙ†)
                Android.speakArabic(text);
            } else {
                // Ù„Ø§: Ù†Ø­Ù† ÙÙŠ Ù…ØªØµÙØ­ ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø¹Ø§Ø¯ÙŠØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø§Ø·Ù‚ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                if (window.speechSynthesis) {
                    speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'ar-SA';
                    utterance.rate = 0.9; // Ø³Ø±Ø¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
                    utterance.pitch = 1.0; // Ù†Ø¨Ø±Ø© Ø§Ù„ØµÙˆØª
                    speechSynthesis.speak(utterance);
                }
            }
        }

        function stopSpeech() {
            window.speechSynthesis.cancel();
            document.getElementById('audioStatus').style.display = 'none';
        }

        // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
        renderSigns();

    </script>
</body>
</html>