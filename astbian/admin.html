<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">ุฅุฏุงุฑุฉ ุงูุงุณุชุจูุงู - ููุตุฉ ุงูุงุณุชุจูุงูุงุช ุงููุงุฎุฑุฉ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐</text></svg>">
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
</head>
<body>
    <!-- In admin.html -->
<header>
    <div class="header-top-row">
        <!-- Right Side: Ministry/Department Info -->
        <div class="header-info-right">
            <span>ูุจุงุฏุฑูู ููุชูููุฉ ูุงูุชุทููุฑ </span>
        </div>

        <!-- Center: Main Title -->
        <div class="header-main-title">
             <h1>ููุตุฉ ุงููุนูู ุงููุฑุดุฏ</h1>
             <p id="header-description">ุฅูุดุงุก ูุชุนุฏูู ุงูุงุณุชุจูุงูุงุช</p>
        </div>

        <!-- Left Side: Logo -->
        <div class="header-logo-left">
            <img src="/images/logoart.png" alt="ุดุนุงุฑ ูุฒุงุฑุฉ ุงูุชุฑุจูุฉ">
        </div>
    </div>
</header>

    <main>
        <div id="loading-spinner" class="loader"></div>
        <div id="alert-container" aria-live="polite"></div>

        <div id="admin-mode-content" class="page-container">
            <h2 id="admin-page-heading">ุฅูุดุงุก ุงุณุชุจูุงู ุฌุฏูุฏ</h2>

            <div class="form-group">
                <label for="survey-title">ุนููุงู ุงูุงุณุชุจูุงู:</label>
                <input type="text" id="survey-title" placeholder="ุฃุฏุฎู ุนููุงู ุงูุงุณุชุจูุงู" required>
            </div>

            <div class="form-group">
                <label for="survey-description">ูุตู ุงูุงุณุชุจูุงู:</label>
                <textarea id="survey-description" placeholder="ูุตู ููุฌุฒ ุนู ุงูุงุณุชุจูุงู"></textarea>
            </div>

            <div class="form-group">
                <label for="survey-admin-pin">ุงูุฑูุฒ ุงูุณุฑู (PIN) ูููุดุฑู (ูุทููุจ):</label>
                <input type="password" id="survey-admin-pin" placeholder="ุฃุฏุฎู ุฑูุฒ ุณุฑู ูููุดุฑู (4+ ุฃุญุฑู/ุฃุฑูุงู)" required minlength="4">
                <small style="color: var(--text-secondary); display: block; margin-top: 5px;">
                    ุณุชุญุชุงุฌ ูุฐุง ุงูุฑูุฒ ูุชุนุฏูู ุงูุงุณุชุจูุงู ุฃู ุนุฑุถ ุงููุชุงุฆุฌ ุงูููุตูุฉ ูุงุญููุง. ุงุญูุธู ุฌูุฏุงู.
                </small>
            </div>

            <h3>ุงูุฃุณุฆูุฉ:</h3>
            <div id="questions-container">
                <!-- Questions will be dynamically added here by script.js -->
            </div>

            <button id="add-question-btn" class="secondary" style="margin-bottom: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 8px;"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ
            </button>

            <hr style="margin: 40px 0; border-color: var(--border-color);">

            <h3>ุฅุนุฏุงุฏุงุช ุงูุงุณุชุจูุงู ุงููุชูุฏูุฉ:</h3>
            <div class="settings-group">
                <div class="form-group">
                    
                    <input type="file" id="survey-logo" accept="images/*">
                    <img id="logo-preview" src="#" alt="ูุนุงููุฉ ุงูุดุนุงุฑ" class="question-image-preview" style="display: none; max-width: 150px; margin-top:10px;">
                </div>
                 <div class="form-group">
                    <label for="survey-logo-url">  ุฃุฏุฎู ุฑุงุจุท ูุจุงุดุฑ ููุดุนุงุฑ:</label>
                    <input type="text" id="survey-logo-url" placeholder="https://example.com/logo.png">
                    <small style="color: var(--text-secondary); display: block; margin-top: 5px;">
                        ุฅุฐุง ููุช ุจุชุญุฏูุฏ ููู ููุถุน ุฑุงุจุทุ ุณูุชู ุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุงููุจุงุดุฑ.
                    </small>
                </div>


                <div class="form-group">
                    <label for="background-color">ููู ุฎูููุฉ ุตูุญุฉ ุงูุงุณุชุจูุงู (ูููุฌูุจ):</label>
                    <input type="color" id="background-color" value="#d3f7fa">
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="allow-anonymous">
                    <label for="allow-anonymous">ุงูุณูุงุญ ุจุงูุฅุฌุงุจุงุช ุงููุฌูููุฉ</label>
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="allow-results-view">
                    <label for="allow-results-view">ุงูุณูุงุญ ูููุฌูุจูู ุจูุดุงูุฏุฉ ููุฎุต ุงููุชุงุฆุฌ ุจุนุฏ ุงูุฅุฌุงุจุฉ</label>
                </div>

                <div class="form-group">
                    <label for="start-date">ุชุงุฑูุฎ ูููุช ุจุฏุก ุงูุงุณุชุจูุงู (ุงุฎุชูุงุฑู):</label>
                    <input type="date" id="start-date">
                    <input type="time" id="start-time" style="margin-top: 10px;">
                </div>

                <div class="form-group">
                    <label for="end-date">ุชุงุฑูุฎ ูููุช ุงูุชูุงุก ุงูุงุณุชุจูุงู (ุงุฎุชูุงุฑู):</label>
                    <input type="date" id="end-date">
                    <input type="time" id="end-time" style="margin-top: 10px;">
                </div>

                <div class="form-group">
                    <label for="thank-you-message">ุฑุณุงูุฉ ุงูุดูุฑ ุจุนุฏ ุงูุฅุฌุงุจุฉ:</label>
                    <textarea id="thank-you-message" placeholder="ุดูุฑุงู ูู ุนูู ุฅุฌุงุจุชู ุงููุงุฎุฑุฉ!"></textarea>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="show-progress">
                    <label for="show-progress">ุฅุธูุงุฑ ุดุฑูุท ุงูุชูุฏู (ูููุฌูุจ)</label>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="randomize-questions">
                    <label for="randomize-questions">ุชุฑุชูุจ ุนุดูุงุฆู ููุฃุณุฆูุฉ (ูููุฌูุจ)</label>
                </div>
            </div>

            <div class="action-buttons">
                <button id="save-local-btn" class="secondary">ุญูุธ ูุญููุงู</button>
                <button id="publish-btn">ูุดุฑ / ุชุญุฏูุซ ุงูุงุณุชุจูุงู</button>
                <button id="preview-survey-btn" class="secondary">ูุนุงููุฉ ุงูุงุณุชุจูุงู</button>
                <label for="import-survey-file" class="button-lookalike secondary">ุงุณุชูุฑุงุฏ (JSON)</label>
                <input type="file" id="import-survey-file" accept=".json" style="display: none;">
                <button id="export-survey-btn" class="secondary">ุชุตุฏูุฑ (JSON)</button>
            </div>

            <div id="admin-link-container" class="link-display" style="display: none;">
                <p><strong>ุชู ูุดุฑ/ุชุญุฏูุซ ุงูุงุณุชุจูุงู ุจูุฌุงุญ!</strong></p>
                <div class="info-item">
                    <span>ูุนุฑู ุงูุงุณุชุจูุงู (Survey ID):</span>
                    <input type="text" id="published-survey-id-output" readonly style="font-weight:bold; color:var(--accent-gold-hover);">
                    <button id="copy-published-id-btn" class="secondary">ูุณุฎ</button>
                    <small style="display:block; width:100%; color: var(--text-secondary); margin-top: 5px;">ุงุญูุธ ูุฐุง ุงููุนุฑู ุฌูุฏุงูุ ุณุชุญุชุงุฌ ุฅููู ูุฅุฏุงุฑุฉ ุงูุงุณุชุจูุงู ูุงุญูุงู.</small>
                </div>
                <div class="info-item" id="published-survey-pin-info" style="display:none;">
                    <span>ุงูุฑูุฒ ุงูุณุฑู ูููุดุฑู (Admin PIN):</span>
                    <input type="text" id="published-survey-pin-output" readonly style="font-weight:bold;">
                    <button id="copy-published-pin-btn" class="secondary">ูุณุฎ</button>
                     <small style="display:block; width:100%; color: var(--text-secondary); margin-top: 5px;">ุงุญูุธ ูุฐุง ุงูุฑูุฒ ุงูุณุฑู ุฌูุฏุงูุ ุณุชุญุชุงุฌ ุฅููู ูุฅุฏุงุฑุฉ ุงูุงุณุชุจูุงู ูุงุญูุงู.</small>
                </div>
                 <div class="info-item" id="published-survey-pin-reminder" style="display:none;">
                    <p style="color: var(--text-secondary); width:100%; text-align:right;">ุงูุฑูุฒ ุงูุณุฑู ูููุดุฑู: ููุฏ ุงุฎุชุฑุช ุงูุฅุจูุงุก ุนูู ุงูุฑูุฒ ุงูุณุฑู ุงูุญุงูู. ุชุฃูุฏ ูู ุฃูู ุชุชุฐูุฑู.</p>
                </div>
    
                <div class="link-item" style="margin-top:15px;">
                    <span>ุฑุงุจุท ุงููุดุงุฑูุฉ (ูููุฌูุจูู):</span>
                    <input type="text" id="survey-share-link-output" readonly>
                    <button id="copy-share-link-btn" class="secondary">ูุณุฎ</button>
                </div>
                <div class="link-item">
                     <span>ุฑุงุจุท ุงูุฅุฏุงุฑุฉ/ุงููุชุงุฆุฌ (ูููุดุฑู):</span>
                    <input type="text" id="survey-admin-view-link-output" readonly>
                    <button id="copy-admin-view-link-btn" class="secondary">ูุณุฎ</button>
                </div>
                 <div style="text-align:center; margin-top:20px; display:flex; gap:10px; flex-wrap:wrap;">
                    <a href="admin.html" class="button-lookalike secondary" style="flex-grow:1;">ุฅูุดุงุก ุงุณุชุจูุงู ุฌุฏูุฏ</a>
                    <a id="go-to-published-survey-btn" href="#" class="button-lookalike" style="flex-grow:1;">ุงูุฐูุงุจ ุฅูู ุตูุญุฉ ุงูุงุณุชุจูุงู ุงูููุดูุฑ</a>
                 </div>
            </div>
        </div>

        <!-- Preview Modal -->
        <div id="preview-modal" class="modal">
            <div class="modal-content preview-modal-content">
                <div class="modal-header">
                    <h2 id="preview-modal-title">ูุนุงููุฉ ุงูุงุณุชุจูุงู</h2>
                    <span class="close-btn" id="close-preview-modal">ร</span>
                </div>
                <div id="preview-survey-content" class="survey-display-card">
                    <!-- Preview content -->
                </div>
            </div>
        </div>

    </main>
    <footer>
        <p>ยฉ <span id="current-year"></span> ูุณู ุงูุงุณุชุจูุงู   . ุฌููุน ุงูุญููู ูุญููุธุฉ ููุตุฉ ุงููุนูู ุงููุฑุดุฏ.</p>
    </footer>
    <script src="script.js"></script>
</body>
</html>